import{j as e,L as b,r as h,A as g}from"./index-ZsmJtF98.js";import{u as p}from"./useQuery-DrQRAqzn.js";const v=a=>{const{animal:t,image:n,Name:i,location:r,bread:o,id:l}=a;let c="http://pets-images.dev-apis.com/pets/none.jpg";return n.length&&(c=n[0]),e.jsxs(b,{to:`/details/${l}`,className:"pet",children:[e.jsx("div",{className:"image-container",children:e.jsx("img",{src:c,alt:i})}),e.jsxs("div",{className:"info",children:[e.jsx("h1",{children:i}),e.jsx("h2",{children:`${t} - ${o} - ${r}`})]})]})},f=({pets:a})=>e.jsx("div",{className:"search",children:a.length?a.map(t=>e.jsx(v,{animal:t.animal,id:t.id,Name:t.name,bread:t.breed,image:t.images,location:`${t.city},${t.state}`},t.id)):e.jsx("h1",{children:"No Pets Found"})}),N=async({queryKey:a})=>{const[,t]=a;return t?(await fetch(`https://pets-v2.dev-apis.com/breeds?animal=${t}`)).json():[]},$=a=>p(["breeds",a],N),P=async({queryKey:a})=>{const[,{animal:t,location:n,breed:i}]=a;return(await fetch(`http://pets-v2.dev-apis.com/pets?animal=${t}&location=${n}&breed=${i}`)).json()},L=a=>p(["search-pets",a],P),S=["bird","cat","dog","rabbit","reptile"],w=()=>{var c,m;const[a,t]=h.useState({location:"",animal:"",breed:""}),[n]=h.useContext(g),i=$(a.animal),r=((c=i==null?void 0:i.data)==null?void 0:c.breeds)??[],o=L(a),l=((m=o==null?void 0:o.data)==null?void 0:m.pets)??[];return e.jsxs("div",{className:"search-params",children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault();const d=new FormData(s.target),x=d.get("animal"),j=d.get("location"),u=d.get("breed");t({animal:x,location:j,breed:u})},children:[n&&e.jsx("div",{className:"pet image-container",children:e.jsx("img",{src:n.images[0],alt:n.name})}),e.jsxs("label",{htmlFor:"location",children:["Location",e.jsx("input",{id:"location",name:"location",placeholder:"Location"})]}),e.jsxs("label",{htmlFor:"animal",children:["Animal",e.jsxs("select",{id:"animal",name:"animal",onChange:s=>{t({...a,animal:s.target.value,breed:""})},children:[e.jsx("option",{}),S.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("label",{htmlFor:"breed",children:["Breed",e.jsxs("select",{id:"breed",disabled:!r.length,name:"breed",children:[e.jsx("option",{}),r.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("button",{children:"Submit"})]}),e.jsx(f,{pets:l})]})};export{w as default};
